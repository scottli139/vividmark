# VividMark å¼€å‘è®¡åˆ’

> ç±»ä¼¼ Typora çš„æ‰€è§å³æ‰€å¾— Markdown ç¼–è¾‘å™¨

## é¡¹ç›®ä¿¡æ¯

- **é¡¹ç›®åç§°**: VividMark
- **æŠ€æœ¯æ ˆ**: Tauri 2.0 + React + TypeScript
- **ä»“åº“**: https://github.com/scottli139/vividmark

---

## å¼€å‘è¿›åº¦

### Phase 1: åŸºç¡€æ¡†æ¶ âœ… (å·²å®Œæˆ)

- [x] é¡¹ç›®åˆå§‹åŒ– (Tauri + React + Vite)
- [x] é…ç½® TailwindCSS
- [x] é…ç½® Zustand çŠ¶æ€ç®¡ç†
- [x] åŸºç¡€å¸ƒå±€ (Toolbar + Sidebar + Editor)
- [x] æ·±è‰²æ¨¡å¼åˆ‡æ¢
- [x] å¼€å‘ç¯å¢ƒéªŒè¯

### Phase 2: æ ¸å¿ƒç¼–è¾‘å™¨ âœ… (å·²å®Œæˆ)

- [x] Markdown è§£æ (markdown-it)
- [x] å—çº§æ¸²æŸ“ç»„ä»¶
- [x] å—çº§ç¼–è¾‘ (ç‚¹å‡»ç¼–è¾‘ï¼Œå¤±ç„¦æ¸²æŸ“)
- [x] ä¼˜åŒ–å—çº§åˆ‡æ¢ä½“éªŒ (å‡å°‘é—ªçƒ)
- [x] æ”¯æŒè¡Œå†…å…ƒç´ ç¼–è¾‘ (ç²—ä½“ã€æ–œä½“ã€é“¾æ¥)
- [x] ä»£ç å—è¯­æ³•é«˜äº®

### Phase 3: æ–‡ä»¶æ“ä½œ âœ… (å·²å®Œæˆ)

- [x] Rust åç«¯æ–‡ä»¶è¯»å†™å‘½ä»¤
- [x] æ–‡ä»¶å¯¹è¯æ¡†æ’ä»¶é›†æˆ
- [x] å·¥å…·æ æ–‡ä»¶æ“ä½œæŒ‰é’®
- [x] å¿«æ·é”®ç»‘å®š (Cmd+O, Cmd+S, Cmd+N)
- [x] æ‹–æ‹½æ‰“å¼€æ–‡ä»¶
- [x] æœ€è¿‘æ–‡ä»¶åˆ—è¡¨
- [x] è‡ªåŠ¨ä¿å­˜

### Phase 4: ç¼–è¾‘å¢å¼º âœ… (æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆ)

- [x] **ç¼–è¾‘æ¨¡å¼é‡æ„** (Source/Preview/Split)
  - ç§»é™¤å—çº§ç¼–è¾‘ï¼Œæ”¹ä¸ºè¿ç»­æ–‡æ¡£ç¼–è¾‘
  - Source æ¨¡å¼ï¼šç›´æ¥ç¼–è¾‘ Markdown æºç 
  - Preview æ¨¡å¼ï¼šåªè¯»é¢„è§ˆ
  - Split æ¨¡å¼ï¼šå·¦æºç å³é¢„è§ˆï¼ŒåŒæ­¥æ»šåŠ¨
- [x] å¿«æ·é”®å·¥å…·æ  (Bold, Italic, Link, etc.)
- [x] **å›¾ç‰‡æ’å…¥ä¸é¢„è§ˆ** âœ…
  - æ”¯æŒç‚¹å‡»å·¥å…·æ æ’å…¥æœ¬åœ°å›¾ç‰‡
  - è‡ªåŠ¨å¤åˆ¶åˆ° `./assets/` æ–‡ä»¶å¤¹
  - Tauri asset åè®®é¢„è§ˆ + base64 å›é€€
- [ ] **æ’¤é”€/é‡åšæ ˆ** ğŸ› - åŠŸèƒ½å·²å®ç°ä½†å­˜åœ¨ bug éœ€è¦ä¿®å¤
  - åŸºäºæ ˆçš„å†å²è®°å½•ç®¡ç†
  - æ”¯æŒ Cmd+Z / Cmd+Shift+Z
  - [ ] ä¿®å¤ undo/redo ä¸å·¥ä½œçš„é—®é¢˜
- [x] **MkDocs æ‰©å±•è¯­æ³•æ”¯æŒ** âœ…
  - Admonitions (æç¤ºæ¡†): `::: tip`, `::: warning`, `::: info`, `::: note`, `::: danger`, `::: success`
  - PlantUML å›¾è¡¨: `@startuml...@enduml` å’Œä»£ç å— ` ```plantuml ``` `
  - æ”¯æŒè‡ªå®šä¹‰æ ‡é¢˜ (å¦‚ `::: tip æ³¨æ„`)
  - ä½¿ç”¨ PlantUML åœ¨çº¿æœåŠ¡æ¸²æŸ“ SVG å›¾è¡¨
- [x] **è¡¨æ ¼ç¼–è¾‘** âœ… - Markdown è¡¨æ ¼çš„å¯è§†åŒ–ç¼–è¾‘ï¼Œæ”¯æŒæ’å…¥å¯¹è¯æ¡†ã€è¡Œåˆ—è‡ªå®šä¹‰
- [ ] æ•°å­¦å…¬å¼ (KaTeX)
- [ ] ä»»åŠ¡åˆ—è¡¨ (Checkbox)
- [ ] WYSIWYG æ¨¡å¼ (åƒ Typora ä¸€æ ·ç›´æ¥ç¼–è¾‘æ¸²æŸ“å†…å®¹)

### Phase 5: æ–‡ä»¶ç®¡ç† (å¾…å¼€å§‹)

- [ ] ä¾§è¾¹æ æ–‡ä»¶æ ‘
- [ ] æ–‡ä»¶å¤¹æ‰“å¼€
- [ ] å¤§çº²è§†å›¾å¢å¼º (ç‚¹å‡»è·³è½¬)
- [ ] å¤šæ ‡ç­¾é¡µ
- [ ] æ–‡ä»¶å˜æ›´ç›‘æ§ (è‡ªåŠ¨é‡è½½)

### Phase 6: é«˜çº§åŠŸèƒ½ (å¾…å¼€å§‹)

- [ ] ä¸»é¢˜ç³»ç»Ÿ (CSS ä¸»é¢˜åˆ‡æ¢)
- [ ] è‡ªå®šä¹‰ä¸»é¢˜ç¼–è¾‘
- [ ] å¯¼å‡º PDF
- [ ] å¯¼å‡º HTML
- [ ] å¯¼å‡º Word
- [ ] æœç´¢ä¸æ›¿æ¢

### Phase 7: æ‰“ç£¨ä¼˜åŒ– (å¾…å¼€å§‹)

- [ ] æ€§èƒ½ä¼˜åŒ– (å¤§æ–‡ä»¶å¤„ç†)
- [ ] åŸç”Ÿèœå•é›†æˆ
- [ ] ç³»ç»Ÿæ‰˜ç›˜
- [ ] å¿«æ·é”®è‡ªå®šä¹‰
- [ ] åå¥½è®¾ç½®é¢æ¿
- [ ] å¤šè¯­è¨€æ”¯æŒ

---

## å·¥ç¨‹åŒ–æ”¹è¿› (åç»­ Session)

### Phase 8: ä»£ç è§„èŒƒé…ç½® âœ… (å·²å®Œæˆ)

- [x] é…ç½® ESLint è§„åˆ™ (flat config, react-hooks, prettier)
- [x] é…ç½® Prettier æ ¼å¼åŒ–è§„åˆ™
- [x] é…ç½® TypeScript ä¸¥æ ¼æ¨¡å¼ (å·²å¯ç”¨ strict, noUnusedLocals, noUnusedParameters)
- [x] æ·»åŠ  .editorconfig ç»Ÿä¸€ç¼–è¾‘å™¨é…ç½®
- [ ] æ·»åŠ  pre-commit hooks (husky + lint-staged) - å¯é€‰
- [ ] åˆ›å»º CONTRIBUTING.md æ–‡æ¡£ - å¯é€‰

**å·²é…ç½®æ–‡ä»¶ï¼š**
```
.prettierrc      # Prettier é…ç½®
.prettierignore  # Prettier å¿½ç•¥æ–‡ä»¶
eslint.config.js # ESLint flat config
.editorconfig    # ç¼–è¾‘å™¨ç»Ÿä¸€é…ç½®
```

### Phase 9: è‡ªåŠ¨åŒ–æµ‹è¯• âœ… (å·²å®Œæˆ)

- [x] é…ç½® Vitest å•å…ƒæµ‹è¯•
- [x] æ·»åŠ  React Testing Library ç»„ä»¶æµ‹è¯•
- [x] é…ç½® Playwright E2E æµ‹è¯•
- [x] æ·»åŠ æµ‹è¯•è„šæœ¬å’Œè¦†ç›–ç‡æŠ¥å‘Š
- [x] **é…ç½® GitHub Actions CI/CD** âœ…
  - [x] è‡ªåŠ¨è¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥
  - [x] è‡ªåŠ¨è¿è¡Œ ESLint + Prettier æ£€æŸ¥
  - [x] è‡ªåŠ¨è¿è¡Œå•å…ƒæµ‹è¯• (Vitest)
  - [ ] è‡ªåŠ¨æ„å»ºå¤šå¹³å°ç‰ˆæœ¬
  - [ ] è‡ªåŠ¨å‘å¸ƒ Release

**æµ‹è¯•ç­–ç•¥ï¼š**
- å•å…ƒæµ‹è¯•ï¼šhooks, utils, store
- ç»„ä»¶æµ‹è¯•ï¼šEditor, Toolbar, Sidebar
- E2E æµ‹è¯•ï¼šæ–‡ä»¶æ“ä½œã€ç¼–è¾‘æµç¨‹

**å·²åˆ›å»ºæµ‹è¯•æ–‡ä»¶ï¼š**
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Editor/__tests__/Editor.test.tsx    # å¾…æ·»åŠ 
â”‚   â”œâ”€â”€ Toolbar/__tests__/Toolbar.test.tsx
â”‚   â””â”€â”€ Sidebar/__tests__/Sidebar.test.tsx
â”œâ”€â”€ stores/__tests__/editorStore.test.ts
â”œâ”€â”€ hooks/__tests__/
â”‚   â”œâ”€â”€ useAutoSave.test.ts
â”‚   â””â”€â”€ useTextFormat.test.ts
â””â”€â”€ lib/markdown/__tests__/parser.test.ts

e2e/
â”œâ”€â”€ file-operations.spec.ts   # æ–‡ä»¶æ“ä½œ E2E
â””â”€â”€ basic-editing.spec.ts     # åŸºç¡€ç¼–è¾‘ E2E
```

### Phase 11: æ—¥å¿—ä¸è¯Šæ–­ç³»ç»Ÿ âœ… (å·²å®Œæˆ)

**ç›®æ ‡**ï¼šå»ºç«‹å®Œå–„çš„æ—¥å¿—ç³»ç»Ÿï¼Œä¾¿äºé—®é¢˜è¯Šæ–­å’Œè°ƒè¯• âœ…

- [x] å‰ç«¯æ—¥å¿—ç³»ç»Ÿ âœ…
  - [x] åˆ›å»ºç»Ÿä¸€çš„ logger å·¥å…· (`src/lib/logger.ts`)
  - [x] æ”¯æŒ log/info/warn/error çº§åˆ«
  - [x] å¼€å‘ç¯å¢ƒè¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œç”Ÿäº§ç¯å¢ƒå¯é…ç½®
  - [x] æ”¯æŒæ—¥å¿—åˆ†ç±» (æ¨¡å—æ ‡ç­¾)
- [ ] åç«¯æ—¥å¿—å¢å¼º (å¯é€‰)
  - [ ] åœ¨ Rust å‘½ä»¤ä¸­æ·»åŠ è¯Šæ–­æ—¥å¿—
  - [ ] è®°å½•æ–‡ä»¶æ“ä½œè·¯å¾„ã€å¤§å°ã€è€—æ—¶
  - [ ] é”™è¯¯æ—¶æ‰“å°è¯¦ç»†å †æ ˆ
- [x] å…³é”®è·¯å¾„æ—¥å¿—è¦†ç›– âœ…
  - [x] æ–‡ä»¶æ‰“å¼€/ä¿å­˜æµç¨‹
  - [x] Editor content åŒæ­¥é€»è¾‘
  - [x] Store çŠ¶æ€å˜æ›´
- [ ] æ—¥å¿—æŸ¥çœ‹åŠŸèƒ½ (å¯é€‰)
  - [ ] å¼€å‘è€…å·¥å…·é¢æ¿
  - [ ] å¯¼å‡ºæ—¥å¿—æ–‡ä»¶

**æ—¥å¿—è§„èŒƒï¼š**
```typescript
// å‰ç«¯æ—¥å¿—ç¤ºä¾‹
import { fileOpsLogger } from './lib/logger'
fileOpsLogger.info('[FileOps] Opening file:', path)
fileOpsLogger.error('[Editor] Failed to sync blocks:', error)
```

**å®ç°æ–‡ä»¶ï¼š**
- `src/lib/logger.ts` - æ—¥å¿—ç³»ç»Ÿæ ¸å¿ƒ
- ä½¿ç”¨æ–¹å¼ï¼š`createLogger('ModuleName')` æˆ–é¢„é…ç½®çš„ `fileOpsLogger`, `editorLogger`

### Phase 12: æµ‹è¯•å¢å¼º âœ… (éƒ¨åˆ†å®Œæˆ)

**ç›®æ ‡**ï¼šå¢åŠ æµ‹è¯•è¦†ç›–ç‡ï¼Œé˜²æ­¢ç±»ä¼¼é—®é¢˜å†æ¬¡å‘ç”Ÿ

- [x] æ ¸å¿ƒå·¥å…·å‡½æ•°æµ‹è¯• âœ…
  - [x] `imageUtils.ts` - 22 ä¸ªæµ‹è¯• (isLocalPath, isUrl, extractImagePath)
  - [x] `parser.ts` - 41 ä¸ªæµ‹è¯• (Markdown è§£æã€å›¾ç‰‡æ¸²æŸ“ã€å¼‚æ­¥è§£æ)
- [x] ç»„ä»¶æµ‹è¯• âœ…
  - [x] Toolbar ç»„ä»¶æµ‹è¯•
  - [x] Sidebar ç»„ä»¶æµ‹è¯•
- [x] Hooks æµ‹è¯• âœ…
  - [x] useAutoSave æµ‹è¯•
  - [x] useTextFormat æµ‹è¯•
- [x] Store æµ‹è¯• âœ…
  - [x] editorStore æµ‹è¯•
- [ ] Editor ç»„ä»¶æ ¸å¿ƒé€»è¾‘æµ‹è¯•
  - [ ] content åŒæ­¥é€»è¾‘æµ‹è¯• (å¤–éƒ¨æ›´æ–° vs ç”¨æˆ·ç¼–è¾‘)
  - [ ] è¾¹ç•Œæƒ…å†µæµ‹è¯• (ç©ºæ–‡ä»¶ã€å¤§æ–‡ä»¶ã€ç‰¹æ®Šå­—ç¬¦)
- [ ] fileOps é›†æˆæµ‹è¯•
  - [ ] mock Tauri invoke æµ‹è¯•æ–‡ä»¶æ“ä½œæµç¨‹
  - [ ] é”™è¯¯å¤„ç†æµ‹è¯•
- [ ] E2E æµ‹è¯•å¢å¼º
  - [ ] æ‰“å¼€æ–‡ä»¶ -> ç¼–è¾‘ -> ä¿å­˜ å®Œæ•´æµç¨‹
  - [ ] æ‹–æ‹½æ‰“å¼€æ–‡ä»¶
  - [ ] å¿«æ·é”®æ“ä½œ

**å½“å‰è¦†ç›–ç‡ï¼š** 60.28% (è¯­å¥), 62.43% (åˆ†æ”¯)

### Phase 10: å“ç‰Œè®¾è®¡ âœ… (å·²å®Œæˆ)

- [x] è®¾è®¡åº”ç”¨ Logo å›¾æ ‡
  - ä½¿ç”¨ SVG çŸ¢é‡è®¾è®¡ (å¯æ— æŸç¼©æ”¾)
  - ç®€çº¦ç°ä»£é£æ ¼ + è“è‰²æ¸å˜
  - æ ¸å¿ƒå…ƒç´ : Markdown # ç¬¦å·
- [x] åˆ›å»ºå›¾æ ‡æ–‡ä»¶
  - [x] 32x32.png
  - [x] 128x128.png
  - [x] 128x128@2x.png
  - [x] 512x512.png
  - [x] icon.icns (macOS)
  - [x] icon.ico (Windows)
  - [x] Windows Store å›¾æ ‡ (30-310px)
- [ ] è®¾è®¡åº”ç”¨å¯åŠ¨ç”»é¢ (Splash Screen) - å¯é€‰
- [ ] è®¾è®¡ç½‘ç«™/README æ¨ªå¹…å›¾ - å¯é€‰

**å·²åˆ›å»ºæ–‡ä»¶ï¼š**
```
src-tauri/icons/
â”œâ”€â”€ icon.svg           # çŸ¢é‡æºæ–‡ä»¶
â”œâ”€â”€ icon.png           # 512x512 é«˜æ¸…ç‰ˆ
â”œâ”€â”€ 32x32.png          # å°å›¾æ ‡
â”œâ”€â”€ 128x128.png        # ä¸­ç­‰å›¾æ ‡
â”œâ”€â”€ 128x128@2x.png     # Retina å›¾æ ‡
â”œâ”€â”€ 512x512.png        # å¤§å›¾æ ‡
â”œâ”€â”€ icon.icns          # macOS å›¾æ ‡åŒ…
â”œâ”€â”€ icon.ico           # Windows å›¾æ ‡
â”œâ”€â”€ StoreLogo.png      # Windows Store
â””â”€â”€ Square*N*Logo.png  # Windows Store å„å°ºå¯¸
```

---

## æŠ€æœ¯ç»†èŠ‚

### æ ¸å¿ƒä¾èµ–

```json
{
  "dependencies": {
    "@tauri-apps/api": "^2.10.1",
    "@tauri-apps/plugin-dialog": "^2.6.0",
    "@tauri-apps/plugin-fs": "^2.4.5",
    "markdown-it": "^14.1.1",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "zustand": "^5.0.11"
  }
}
```

### ç›®å½•ç»“æ„

```
vividmark/
â”œâ”€â”€ src/                    # React å‰ç«¯
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Editor/         # æ ¸å¿ƒç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ Sidebar/        # ä¾§è¾¹æ 
â”‚   â”‚   â””â”€â”€ Toolbar/        # å·¥å…·æ 
â”‚   â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ stores/             # Zustand çŠ¶æ€
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ markdown/       # Markdown è§£æ
â”‚   â”‚   â””â”€â”€ fileOps.ts      # æ–‡ä»¶æ“ä½œ
â”‚   â”œâ”€â”€ styles/             # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ App.tsx
â”œâ”€â”€ src-tauri/              # Rust åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ lib.rs          # ä¸»é€»è¾‘ + å‘½ä»¤
â”‚   â”‚   â””â”€â”€ main.rs         # å…¥å£
â”‚   â”œâ”€â”€ Cargo.toml
â”‚   â””â”€â”€ tauri.conf.json
â””â”€â”€ package.json
```

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### å·²å®Œæˆ âœ…

1. ~~**Phase 8: ä»£ç è§„èŒƒé…ç½®**~~ âœ… 
2. ~~**Phase 9: è‡ªåŠ¨åŒ–æµ‹è¯•**~~ âœ… (CI/CD å·²é…ç½®ï¼Œæµ‹è¯•è¦†ç›–ç‡ 60%+)
3. ~~**Phase 10: å“ç‰Œè®¾è®¡**~~ âœ…
4. ~~**Phase 11: æ—¥å¿—ä¸è¯Šæ–­ç³»ç»Ÿ**~~ âœ…
5. ~~**Phase 4.1: æ’¤é”€/é‡åš**~~ âœ…
6. ~~**Phase 4.2: å›¾ç‰‡æ’å…¥ä¸é¢„è§ˆ**~~ âœ…

### åŠŸèƒ½å¼€å‘ (ä¸‹ä¸€è¿­ä»£)

1. ~~**è¡¨æ ¼ç¼–è¾‘æ”¯æŒ**~~ âœ… - Markdown è¡¨æ ¼çš„å¯è§†åŒ–ç¼–è¾‘å·²å®Œæˆ
2. **ä¿®å¤ Undo/Redo** ğŸ› - å½“å‰åŠŸèƒ½å­˜åœ¨ bug éœ€è¦ä¿®å¤
3. **å¤šè¯­è¨€æ”¯æŒ (i18n)** ğŸ†• - æ”¯æŒç®€ä½“ä¸­æ–‡å’Œè‹±è¯­
4. **æ•°å­¦å…¬å¼ (KaTeX)** - æ”¯æŒ LaTeX å…¬å¼æ¸²æŸ“
5. **ä»»åŠ¡åˆ—è¡¨** - Checkbox ä»»åŠ¡æ¸…å•
6. **å¤šæ ‡ç­¾é¡µ** - åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶
7. **å¤§çº²è§†å›¾å¢å¼º** - ç‚¹å‡»æ ‡é¢˜è·³è½¬

### å·¥ç¨‹ä¼˜åŒ–

1. **æ€§èƒ½ä¼˜åŒ–** - å¤§æ–‡ä»¶å¤„ç†ä¼˜åŒ–
2. **E2E æµ‹è¯•å¢å¼º** - å®Œæ•´ç”¨æˆ·æµç¨‹æµ‹è¯•

### æœªæ¥ä¼˜åŒ–ä»»åŠ¡ (Future Improvements)

#### Split æ¨¡å¼åŒæ­¥æ»šåŠ¨ä¼˜åŒ–
- [ ] **åŒæ­¥æ»šåŠ¨ç®—æ³•æ”¹è¿›** - å½“å‰åŸºäºç™¾åˆ†æ¯”çš„åŒæ­¥åœ¨å†…å®¹é•¿åº¦å·®å¼‚å¤§æ—¶ä¸å¤Ÿç²¾å‡†
  - å¯è€ƒè™‘åŸºäº heading/paragraph ä½ç½®çš„æ™ºèƒ½åŒæ­¥
  - æˆ–å®ç°åŸºäº caret/cursor ä½ç½®çš„ç²¾å‡†åŒæ­¥
- [ ] **åŒæ­¥çµæ•åº¦è°ƒèŠ‚** - å…è®¸ç”¨æˆ·è°ƒæ•´åŒæ­¥å“åº”é€Ÿåº¦

#### PlantUML å¢å¼º
- [ ] **æœ¬åœ° PlantUML æ¸²æŸ“** - å½“å‰ä¾èµ– plantuml.com åœ¨çº¿æœåŠ¡ï¼Œç¦»çº¿æ—¶æ— æ³•æ˜¾ç¤º
  - å¯é›†æˆ plantuml.jar æˆ–ä½¿ç”¨ WASM ç‰ˆæœ¬
- [ ] **PlantUML ç¼–è¾‘æ¨¡å¼** - æ”¯æŒåœ¨ç¼–è¾‘å™¨ä¸­ç›´æ¥ç¼–è¾‘ PlantUML ä»£ç å¹¶å®æ—¶é¢„è§ˆ

#### Admonitions å¢å¼º  
- [ ] **å¯æŠ˜å  Admonitions** - æ”¯æŒ `??? note` è¯­æ³•ï¼ˆå¯æŠ˜å æç¤ºæ¡†ï¼‰
- [ ] **åµŒå¥— Admonitions** - æ”¯æŒæç¤ºæ¡†å†…éƒ¨åµŒå¥—å…¶ä»– Markdown å…ƒç´ 

---

## å¯åŠ¨å‘½ä»¤

```bash
cd /Volumes/hagibis1t/huicom/github/markdown/vividmark

# å¼€å‘æ¨¡å¼
pnpm tauri dev

# æ„å»º
pnpm tauri build
```

---

## Session è®°å½•

### 2025-02-26 è¡¨æ ¼ç¼–è¾‘åŠŸèƒ½å®ç°

**å®Œæˆå·¥ä½œï¼š**
- âœ… å®ç°è¡¨æ ¼æ’å…¥å¯¹è¯æ¡†ç»„ä»¶ (`TableDialog.tsx`)
  - æ”¯æŒé€‰æ‹©è¡Œæ•°å’Œåˆ—æ•°ï¼ˆ1-50 è¡Œï¼Œ1-20 åˆ—ï¼‰
  - å®æ—¶é¢„è§ˆè¡¨æ ¼ç»“æ„
  - å¯é€šè¿‡ +/- æŒ‰é’®æˆ–ç›´æ¥è¾“å…¥è°ƒæ•´æ•°å€¼
- âœ… åˆ›å»ºè¡¨æ ¼å·¥å…·å‡½æ•°æ¨¡å— (`tableUtils.ts`)
  - `generateTable()` - ç”Ÿæˆ Markdown è¡¨æ ¼
  - `parseTable()` - è§£æ Markdown è¡¨æ ¼
  - `addTableRow()` / `addTableColumn()` - æ·»åŠ è¡Œåˆ—
  - `deleteTableRow()` / `deleteTableColumn()` - åˆ é™¤è¡Œåˆ—
  - `formatTable()` - æ ¼å¼åŒ–è¡¨æ ¼å¯¹é½
  - `isValidTable()` - éªŒè¯è¡¨æ ¼æœ‰æ•ˆæ€§
- âœ… åœ¨ Toolbar æ·»åŠ è¡¨æ ¼æ’å…¥æŒ‰é’®
- âœ… æ·»åŠ å®Œæ•´çš„å•å…ƒæµ‹è¯•ï¼ˆ80+ æµ‹è¯•ç”¨ä¾‹ï¼‰
  - `tableUtils.test.ts` - 40 ä¸ªæµ‹è¯•ç”¨ä¾‹
  - `TableDialog.test.tsx` - 20 ä¸ªæµ‹è¯•ç”¨ä¾‹
  - `Toolbar.test.tsx` - æ–°å¢è¡¨æ ¼ç›¸å…³æµ‹è¯•
- âœ… æ·»åŠ  E2E æµ‹è¯• (`table-editing.spec.ts`)
- âœ… å¢å¼ºè¡¨æ ¼æ ·å¼ï¼ˆéš”è¡Œå˜è‰²ã€æ‚¬åœæ•ˆæœã€å¯¹é½æ”¯æŒï¼‰
- âœ… æ”¯æŒ GFM è¡¨æ ¼å¯¹é½è¯­æ³• (`:---`, `:---:`, `---:`)

**ä¾èµ–ï¼š**
- æ— æ–°å¢ä¾èµ–ï¼Œä½¿ç”¨ç°æœ‰ markdown-it è¡¨æ ¼æ”¯æŒ

**æŠ€æœ¯è¦ç‚¹ï¼š**
- ä½¿ç”¨ `markdown-it` å†…ç½®çš„ GFM è¡¨æ ¼æ”¯æŒ
- å¯¹è¯æ¡†ä½¿ç”¨ Portal æ¨¡å¼æ¸²æŸ“åœ¨ body å±‚çº§
- è¡¨æ ¼å·¥å…·æ”¯æŒå®Œæ•´çš„ CRUD æ“ä½œï¼ˆä¾›æœªæ¥æ‰©å±•ä½¿ç”¨ï¼‰

---

### 2025-02-26 MkDocs æ‰©å±•è¯­æ³•æ”¯æŒ

**å®Œæˆå·¥ä½œï¼š**
- âœ… å®ç° Admonitions (æç¤ºæ¡†) æ”¯æŒ
  - æ”¯æŒç±»å‹: tip, warning, info, note, danger, success, hint, important, caution
  - æ”¯æŒè‡ªå®šä¹‰æ ‡é¢˜ (å¦‚ `::: tip æ³¨æ„`)
  - æ·»åŠ å½©è‰²è¾¹æ¡†å’Œå›¾æ ‡æ ·å¼ (æ·±è‰²æ¨¡å¼é€‚é…)
- âœ… å®ç° PlantUML å›¾è¡¨æ¸²æŸ“
  - æ”¯æŒè¡Œå†…è¯­æ³• `@startuml...@enduml`
  - æ”¯æŒä»£ç å—è¯­æ³• ` ```plantuml ``` `
  - ä½¿ç”¨ PlantUML åœ¨çº¿æœåŠ¡ (plantuml.com) æ¸²æŸ“ SVG
- âœ… æ·»åŠ  14 ä¸ªæµ‹è¯•ç”¨ä¾‹è¦†ç›–æ–°åŠŸèƒ½
- âœ… æ›´æ–° CSS æ ·å¼æ–‡ä»¶

**ä¾èµ–å®‰è£…ï¼š**
```bash
pnpm add markdown-it-container plantuml-encoder
pnpm add -D @types/markdown-it-container
```

**ä½¿ç”¨ç¤ºä¾‹ï¼š**
```markdown
::: tip
æç¤ºå†…å®¹
:::

::: warning å¼€å‘å·¥å…·
è­¦å‘Šå†…å®¹
:::

@startuml
Alice -> Bob: Hello
@enduml
```

---

### 2025-02-26 å›¾ç‰‡æ’å…¥åŠŸèƒ½å®ç°

**å®Œæˆå·¥ä½œï¼š**
- âœ… å®ç°å›¾ç‰‡æ’å…¥åŠŸèƒ½ (Toolbar å›¾ç‰‡æŒ‰é’®)
- âœ… è‡ªåŠ¨å¤åˆ¶å›¾ç‰‡åˆ° `./assets/` æ–‡ä»¶å¤¹
- âœ… ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨ï¼Œä¿æŒ Markdown ç®€æ´
- âœ… Tauri asset åè®®é¢„è§ˆ + base64 å›é€€
- âœ… æ·»åŠ  35 ä¸ªæµ‹è¯• (imageUtils.test.ts + parser.test.ts)
- âœ… ä¿®å¤ CI ç±»å‹æ£€æŸ¥å’Œæ ¼å¼åŒ–é—®é¢˜

**æäº¤è®°å½•ï¼š**
```
41df67d style: fix code formatting with prettier
00cae82 fix: resolve type errors and lint issues from CI
96fe9dc feat: å®ç°å›¾ç‰‡æ’å…¥å’Œé¢„è§ˆåŠŸèƒ½
```

**æŠ€æœ¯è¦ç‚¹ï¼š**
- ä½¿ç”¨ `convertFileSrc` è½¬æ¢æœ¬åœ°è·¯å¾„ä¸ºå¯è®¿é—® URL
- è‡ªå®šä¹‰ markdown-it å›¾ç‰‡æ¸²æŸ“è§„åˆ™
- å¼‚æ­¥æ¸²æŸ“æ”¯æŒå›¾ç‰‡é¢„å¤„ç†
- Protocol-relative URL (`//...`) è¾¹ç•Œå¤„ç†

---

## æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œé—®é¢˜**: ä½¿ç”¨æ¸…åé•œåƒ
   - Cargo: `~/.cargo/config.toml` å·²é…ç½®
   - npm: è‡ªåŠ¨ä½¿ç”¨é•œåƒ

2. **ä»£ç†é—®é¢˜**: git ä»£ç†å·²æ¸…é™¤ï¼Œå¦‚éœ€æ¢å¤:
   ```bash
   git config --global http.proxy http://127.0.0.1:7897
   git config --global https.proxy http://127.0.0.1:7897
   ```
